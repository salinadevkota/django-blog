{% extends 'blog/base.html' %}
{% block content %}

<h2>{{ post.title }}</h2>
<p>{{ post.content }}</p>
<p>
    <small>
        By {{ post.author }} |
        {{ post.created_at|date:"M d, Y, g:i a" }}
    </small>
</p>

{% if user == post.author %}
    <a href="{% url 'post_update' post.id %}">Edit</a>

    <form method="post" action="{% url 'post_delete' post.id %}" style="display:inline;">
        {% csrf_token %}
        <button type="submit">Delete</button>
    </form>
{% endif %}

<hr>

<h3>Comments</h3>

{% for comment in comments %}
    <p><b>{{ comment.user }}</b>: {{ comment.text }}</p>
{% empty %}
    <p>No comments yet.</p>
{% endfor %}

{% if user.is_authenticated %}
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Add Comment</button>
</form>
{% else %}
<p><a href="{% url 'login' %}">Login to comment</a></p>
{% endif %}

{% endblock %}
